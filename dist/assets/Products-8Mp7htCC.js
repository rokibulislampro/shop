import{r as m,j as e,B as u,f as P,s as S,af as k,i as C,ag as A,h as D,k as F,ah as T,ai as U,aj as E,M as O,ak as R,al as q}from"./index-B5pvZNP2.js";const B=({onClose:r,onAdd:p})=>{const h=(o=>{const d={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return o.toLocaleString("en-US",d).replace(",","")})(new Date),b=()=>{const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let d="";for(let n=0;n<5;n++)d+=o[Math.floor(Math.random()*o.length)];return d},[a,N]=m.useState({name:"",category:"",subcategory:"",brand:"",description:"",purchasePrice:"",price:"",discountPrice:"",status:"",rating:"",date:h,slots:"",sold:"",sku:b(),currency:["$","৳"],imageFile:null}),[x,g]=m.useState(!0);m.useEffect(()=>{const{currency:o,name:d,price:n,status:i,imageFile:t}=a;g(!(o&&d&&n&&i&&t))},[a]);const s=o=>{const{name:d,value:n,files:i}=o.target;N(d==="image"?t=>({...t,imageFile:i[0]}):t=>({...t,[d]:n}))},y=async()=>{const{name:o,category:d,price:n,status:i,imageFile:t}=a;if(!o||!d||!n||!i||!t){u.error("Please fill all required fields.",{position:u.POSITION.TOP_CENTER});return}try{const l=["$","৳"];if(a.imageFile){const c=P(S,`product-images/${a.imageFile.name}`);await k(c,a.imageFile);const f=await C(c),v={...a,image:f,currency:l};delete v.imageFile,p(v)}else{const c={...a,currency:l};delete c.imageFile,p(c)}r()}catch(l){console.error("Error uploading image:",l),u.error("Failed to add product.",{position:u.POSITION.TOP_CENTER})}};return e.jsx("section",{className:"p-[1rem] fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-fit justify-center items-center text-sm",children:[e.jsx("h2",{className:"text-xl font-semibold w-full",children:"Add New Product"}),e.jsx("div",{className:"flex items-center gap-3 my-3 w-full",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s,placeholder:"Name",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"text",name:"category",value:a.category,onChange:s,placeholder:"Category",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"text",name:"subcategory",value:a.subcategory,onChange:s,placeholder:"Subcategory",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"text",name:"brand",value:a.brand,onChange:s,placeholder:"Brand",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"number",name:"purchasePrice",value:a.purchasePrice,onChange:s,placeholder:"Purchase Price",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"price",value:a.price,onChange:s,placeholder:"Regular Price",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"number",name:"discountPrice",value:a.discountPrice,onChange:s,placeholder:"Discount Price",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"slots",value:a.slots,onChange:s,placeholder:"Slots",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{name:"status",value:a.status,onChange:s,required:!0,className:"w-full p-3 px-5 border rounded-full input-field",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Status"})," ",e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"rating",value:a.rating,onChange:s,placeholder:"Rating (1~5)",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"file",name:"image",onChange:s,placeholder:"Upload Image",multiple:!0,className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("textarea",{name:"description",value:a.description,onChange:s,placeholder:"Type product details...",className:"w-full p-1 px-5 border rounded-full input-field flex items-center"})})]})}),e.jsxs("div",{className:"w-full flex justify-end items-center gap-3",children:[e.jsx("button",{className:"bg-[#1d1e29] hover:bg-black text-white px-8 py-3 rounded-full font-semibold transition-all",onClick:r,children:"Cancel"}),e.jsx("button",{className:"bg-[#ff5a00] hover:bg-green-500 text-white px-6 py-3 rounded-full font-semibold transition-all",onClick:y,disabled:x,children:"Add Product"})]})]})})},I=({product:r,onClose:p,onUpdate:j})=>{const b=(n=>{const i={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return n.toLocaleString("en-US",i).replace(",","")})(new Date),[a,N]=m.useState({name:r.name||"",category:r.category||"",subcategory:r.subcategory||"",brand:r.brand||"",purchasePrice:r.purchasePrice||"",price:r.price||"",discountPrice:r.discountPrice||"",slots:r.slots||"",sold:r.sold||"",sku:r.sku||"",rating:r.rating||"",status:r.status||"",description:r.description||"",image:r.image||"",date:r.date||"",updateDate:b}),[x,g]=m.useState(null),s=n=>{const{name:i,value:t}=n.target;N({...a,[i]:t})},y=n=>{g(n.target.files[0])},o=()=>new Promise((n,i)=>{if(!x){n(null);return}const t=A(),l=P(t,`products/${x.name}`),c=D(l,x);c.on("state_changed",f=>{},f=>{i(f)},()=>{C(c.snapshot.ref).then(f=>{n(f)}).catch(f=>{i(f)})})}),d=async n=>{n.preventDefault();try{const i=await o(),t=i?{...a,image:i}:a;await j(r._id,t),p()}catch(i){u.error("Failed to update product."),console.error("Error updating product:",i)}};return e.jsx("section",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-[90%] max-w-2xl",children:[e.jsx("h2",{className:"text-xl mb-4 font-semibold",children:"Update Product"}),e.jsxs("form",{className:" text-sm",onSubmit:d,children:[" ",e.jsx("div",{className:"flex items-center gap-3 my-3 w-full",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s,placeholder:"Name",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"text",name:"category",value:a.category,onChange:s,placeholder:"Category",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"text",name:"subcategory",value:a.subcategory,onChange:s,placeholder:"Subcategory",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"text",name:"brand",value:a.brand,onChange:s,placeholder:"Brand",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"number",name:"purchasePrice",value:a.purchasePrice,onChange:s,placeholder:"Purchase Price",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"price",value:a.price,onChange:s,placeholder:"Regular Price",required:!0,className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"number",name:"discountPrice",value:a.discountPrice,onChange:s,placeholder:"Discount Price",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"slots",value:a.slots,onChange:s,placeholder:"Slots",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{name:"status",value:a.status,onChange:s,required:!0,className:"w-full p-3 px-5 border rounded-full input-field",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Status"})," ",e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("input",{type:"number",name:"rating",value:a.rating,onChange:s,placeholder:"Rating (1~5)",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsx("div",{className:"flex items-center gap-3 my-3",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"file",name:"image",onChange:y,placeholder:"Upload Image",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full mt-2 md:mt-0",children:e.jsx("textarea",{name:"description",value:a.description,onChange:s,placeholder:"Type product details...",className:"w-full p-1 px-5 border rounded-full input-field flex items-center"})})]})}),e.jsxs("div",{className:"w-full flex justify-end items-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-[#1d1e29] hover:bg-black text-white px-8 py-3 rounded-full font-semibold transition-all",onClick:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-[#ff5a00] hover:bg-orange-600 text-white px-6 py-3 rounded-full font-semibold transition-all",children:"Update Product"})]})]})]})})},L=()=>{const[r,p]=m.useState([]),[j,w]=m.useState(""),h=F(),[b,a]=m.useState(!1),[N,x]=m.useState(!1),[g,s]=m.useState(" ");m.useEffect(()=>{(async()=>{try{const l=await h.get("/product");p(l.data)}catch(l){console.error("Error fetching products:",l),u.error("Failed to load products.")}})()},[h]);const y=r.filter(t=>{const l=t.name?t.name.toLowerCase():"",c=t.sku?t.sku.toString():"";return l.includes(j.toLowerCase())||c.includes(j)}),o=async t=>{try{await h.delete(`/product/${t}`),p(r.filter(l=>l._id!==t)),u.success("Product deleted successfully!")}catch(l){u.error("Failed to delete product."),console.error("Error deleting product:",l)}},d=async t=>{try{const l=await h.post("/product",t);p(c=>[...c,l.data]),u.success("Product added successfully!"),setTimeout(()=>{window.location.reload()},1e3)}catch(l){u.error("Failed to add product."),console.error("Error adding product:",l)}},n=async(t,l)=>{try{await h.put(`/product/${t}`,l),p(r.map(c=>c._id===t?{...l,_id:t}:c)),u.success("Product updated successfully!"),x(!1)}catch(c){u.error("Failed to update product."),console.error("Error updating product:",c)}};function i(t){switch(t){case"Available":return{color:"#32CD32",backgroundColor:"rgba(50, 205, 50, 0)"};case"Out of Stock":return{color:"red",backgroundColor:"rgba(255, 0, 0, 0)"};default:return{color:"blue",backgroundColor:"rgba(0, 0, 255, 0)"}}}return e.jsxs("section",{className:"container mx-auto px-[0.5rem] py-6 text-sm",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-3 text-gray-400",children:e.jsx(T,{})}),e.jsx("input",{type:"text",placeholder:"Search products by name or SKU",className:"border p-2 pl-10 pr-10 rounded-full w-full border-slate-300",value:j,onChange:t=>w(t.target.value)}),e.jsxs("div",{className:"absolute right-3 top-3 flex items-center text-sm text-gray-400",children:[e.jsx(U,{className:"mr-1"}),e.jsx(E,{})]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs("table",{className:"table-auto w-full text-left whitespace-no-wrap",children:[e.jsx("thead",{className:"bg-slate-50 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-start",children:"Image"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Category"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"SKU"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Brand"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Slots"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Sold"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Update"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Delete"})]})}),e.jsx("tbody",{children:y.map((t,l)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2 flex items-center gap-2",children:[l+1,"."," ",e.jsx("img",{src:t.image,alt:"Product",className:"w-16 h-16 rounded object-fill"})]}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.name||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.date||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.category||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.sku||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.brand||"N/A"}),e.jsxs("td",{className:"px-4 py-2 text-start",children:["৳",t.price||"N/A"]}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.slots||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.sold||"N/A"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{style:{color:i(t.status).color,backgroundColor:i(t.status).backgroundColor,padding:"8px",borderRadius:"4px"},children:t.status||"N/A"})}),e.jsx("td",{className:"px-4 py-2 text-start",children:e.jsx("button",{className:"bg-slate-100 hover:bg-[#1e1d29] hover:text-white transition-all shadow-md p-3.5 rounded-full flex items-center justify-center",onClick:()=>{s(t),x(!0)},children:e.jsx(O,{})})}),e.jsx("td",{className:"px-4 py-2 text-start",children:e.jsx("button",{className:"bg-[#ff5a00] hover:bg-orange-600 transition-all text-white font-bold shadow-md p-3.5 rounded-full flex items-center justify-center",onClick:()=>o(t._id),children:e.jsx(R,{})})})]},t._id))})]})}):e.jsx("p",{children:"No products available"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fixed right-5 bottom-5 bg-[#1e1d29] hover:bg-green-600 text-white transition-all shadow-md p-3.5 rounded-full flex items-center justify-center",onClick:()=>a(!0),children:e.jsx(q,{})}),b&&e.jsx(B,{onClose:()=>a(!1),onAdd:d})]}),N&&g&&e.jsx(I,{product:g,onClose:()=>x(!1),onUpdate:n})]})};export{L as default};
