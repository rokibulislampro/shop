import{aa as Ce,r as a,k as Se,C as ke,W as Pe,j as e,L as Le,ax as Be,ao as ee,ap as te,aq as Fe,d as se,B as v}from"./index-B5pvZNP2.js";import{P as Oe}from"./ProductPopup-Cd_lrc5y.js";import{h as Ie,n as Ae}from"./hoverFilter-pthvAAF0.js";const _e=()=>{const{category:w}=Ce(),[h,le]=a.useState([]),N=Se(),[ae,ne]=a.useState(!0),[A,ie]=a.useState({}),[d,b]=a.useState(1),y=12,$=d*y,re=$-y,D=h.slice(re,$),C=Math.ceil(h.length/y),[x,E]=a.useState(1),S=4,u=(x-1)*S+1,_=Math.min(u+S-1,C),[f,g]=a.useState(""),[k,z]=a.useState(""),[M,H]=a.useState(!1),[R,oe]=a.useState([]),[r,T]=a.useState(""),[W,P]=a.useState(!1),[j,L]=a.useState(!1),[q,ce]=a.useState([]),[o,V]=a.useState(""),[p,B]=a.useState(!1),[de,G]=a.useState(!1),{cart:me,cartDispatch:F}=a.useContext(ke),{wishlistDispatch:xe}=a.useContext(Pe),[U,O]=a.useState(null);a.useEffect(()=>{(async()=>{try{let s,l;if(w){const n=encodeURIComponent(w);s=await N.get(`/product?category=${n}`)}else s=await N.get("/product");l=s.data,f==="Low to High"?l=l.sort((n,c)=>n.discountPrice-c.discountPrice):f==="High to Low"?l=l.sort((n,c)=>c.discountPrice-n.discountPrice):f==="Newest Arrives"&&(l=l.sort((n,c)=>new Date(c.date)-new Date(n.date)));const i=[...new Set(l.map(n=>n.category))];oe(i),r&&(l=l.filter(n=>n.category===r));const m=[...new Set(l.map(n=>n.brand))];ce(m),o&&(l=l.filter(n=>n.brand===o)),P(!!(r||o||f)),le(l)}catch(s){console.error("Error fetching products:",s)}finally{ne(!1)}})()},[w,f,r,o,N]);const X=()=>{T(null),V(null),z(null),g(null),P(!1)},fe=[{name:"Low to High",onClick:()=>g("Low to High")},{name:"High to Low",onClick:()=>g("High to Low")},{name:"Newest Arrives",onClick:()=>g("Newest Arrives")}],he=t=>{z(t.name),t.onClick(),H(!1)},Y=t=>{T(t),L(!1)},J=t=>{V(t),B(!1)},K=t=>{xe({type:"ADD_TO_WISHLIST",product:{...t,id:t._id}}),ie(s=>({...s,[t._id]:!0})),v.success(`${t.name} added to wishlist!`)},ue=t=>{F({type:"Add",product:{...t,id:t._id}}),v.success(`${t.name} added to cart!`)},Q=t=>{F({type:"Add",product:{...t,id:t._id,quantity:1}}),v.success("Proceeding to Checkout")},ge=t=>{F({type:"Remove",id:t}),v.info("Item removed from cart.")},je=t=>me.some(s=>s.id===t);function pe(){d!==1&&(b(d-1),d===u&&x>1&&E(x-1))}function ve(t){b(t)}function we(){d!==C&&(b(d+1),d===_&&x<Math.ceil(C/S)&&E(x+1))}const[I,Z]=a.useState(!1);a.useEffect(()=>{const t=s=>{const l=document.getElementById("filter-modal"),i=document.getElementById("filter-button");I&&l&&!l.contains(s.target)&&!i.contains(s.target)&&Z(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[I]);const Ne=()=>{Z(t=>!t)};return e.jsx("section",{className:"m-[0.5rem] xl:mx-[10rem]",children:ae?e.jsx(Le,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"sm:w-1/4 lg:w-1/6 hidden sm:block",children:[e.jsxs("h3",{className:"font-semibold text-sm text-[#ff5a00] my-5",children:["Advanced Search (",h.length,")"]}),W&&e.jsx("div",{className:"w-11/12 relative bg-[#ff5a00] text-white mb-2 rounded overflow-hidden",children:e.jsx("button",{onClick:X,className:"w-full p-2.5 border text-sm text-center focus:outline-none",children:"Clear Filter"})}),e.jsx("div",{className:"w-11/12 mt-4 relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>L(!j),className:"w-full p-2.5 text-[#ff5a00] border text-sm rounded-sm text-left focus:outline-none",children:[e.jsx("span",{className:"text-gray-700 hover:text-[#ff5a00]",children:r||"Select Category"}),e.jsx("span",{className:"float-right",children:"▾"})]}),j&&e.jsx("div",{className:"w-full mt-2 rounded-md bg-white z-10",children:e.jsx("ul",{className:"listed",children:R.map((t,s)=>e.jsx("li",{className:"p-2 hover:bg-gray-100",children:e.jsx("button",{onClick:()=>Y(t),className:`w-full text-left ${r===t?"text-[#ff5a00]":"text-gray-700"}`,children:t})},s))})})]})}),e.jsx("div",{className:"w-11/12 mt-4 relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>B(!p),className:"w-full p-2.5 text-[#ff5a00] border text-sm rounded-sm text-left focus:outline-none",children:[e.jsx("span",{className:"text-gray-700 hover:text-[#ff5a00]",children:o||"Select Brand"}),e.jsx("span",{className:"float-right",children:"▾"})]}),p&&e.jsx("div",{className:"w-full mt-2 rounded-md bg-white z-10",children:e.jsx("ul",{className:"listed",children:q.map((t,s)=>e.jsx("li",{className:"p-2 hover:bg-gray-100",children:e.jsx("button",{onClick:()=>J(t),className:`w-full text-left ${o===t?"text-[#ff5a00]":"text-gray-700"}`,children:t})},s))})})]})})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex w-full m-1 md:m-2 justify-between sm:justify-end items-center p-[0.5rem] bg-white shadow-md rounded-sm",children:[e.jsxs("div",{className:"w-1/2 md:w-[220px] sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{id:"filter-button",onClick:Ne,className:"bg-white hover:bg-[#ff5a00] p-1.5 px-5 rounded shadow-md transition-all",onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),children:e.jsx("img",{src:de?Ie:Ae,alt:"Filter Button",className:"w-6"})}),e.jsxs("h4",{className:"font-semibold text-xs text-[#ff5a00] my-5",children:["Advanced Search (",h.length,")"]})]}),e.jsx("div",{className:"w-full",children:I&&e.jsxs("div",{id:"filter-modal",className:"absolute w-1/2 md:w-[220px] bg-white h-[58vh] overflow-hidden mt-2 p-3 shadow-md z-20",children:[W&&e.jsx("div",{className:"w-11/12 relative bg-[#ff5a00] text-white mb-2 rounded overflow-hidden",children:e.jsx("button",{onClick:X,className:"w-full p-2.5 border text-sm text-center focus:outline-none",children:"Clear Filter"})}),e.jsx("div",{className:"w-11/12 mt-4 relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>L(!j),className:"w-full p-2.5 text-[#ff5a00] border text-sm rounded-sm text-left focus:outline-none",children:[e.jsx("span",{className:"text-gray-700 hover:text-[#ff5a00]",children:r||"Select Category"}),e.jsx("span",{className:"float-right",children:"▾"})]}),j&&e.jsx("div",{className:"w-full mt-2 rounded-md overflow-auto bg-white z-10",children:e.jsx("ul",{className:"listed",children:R.map((t,s)=>e.jsx("li",{className:"p-2 hover:bg-gray-100",children:e.jsx("button",{onClick:()=>Y(t),className:`w-full text-left ${r===t?"text-[#ff5a00]":"text-gray-700"}`,children:t})},s))})})]})}),e.jsx("div",{className:"w-11/12 mt-4 relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>B(!p),className:"w-full p-2.5 text-[#ff5a00] border text-sm rounded-sm text-left focus:outline-none",children:[e.jsx("span",{className:"text-gray-700 hover:text-[#ff5a00]",children:o||"Select Brand"}),e.jsx("span",{className:"float-right",children:"▾"})]}),p&&e.jsx("div",{className:"w-full mt-2 rounded-md overflow-auto bg-white z-10",children:e.jsx("ul",{className:"listed",children:q.map((t,s)=>e.jsx("li",{className:"p-2 hover:bg-gray-100",children:e.jsx("button",{onClick:()=>J(t),className:`w-full text-left ${o===t?"text-[#ff5a00]":"text-gray-700"}`,children:t})},s))})})]})})]})})]}),e.jsxs("div",{className:"relative right-0",children:[e.jsxs("button",{onClick:()=>H(!M),className:"w-[9rem] p-2.5 bg-[#ff5a00] text-white text-sm border rounded-sm text-left focus:outline-none",children:[e.jsx("span",{className:"text-white",children:k||"Select Sorting"}),e.jsx("span",{className:"float-right",children:"▾"})]}),M&&e.jsx("div",{className:"absolute w-full mt-2 bg-white rounded-sm z-20",children:e.jsx("ul",{className:"listed",children:fe.map((t,s)=>e.jsx("li",{className:"p-2 hover:bg-gray-100",children:e.jsx("button",{onClick:()=>he(t),className:`w-full text-left ${k===t.name?"text-[#ff5a00]":"text-gray-700"}`,children:t.name})},s))})})]})]}),D.length===0?e.jsxs("div",{className:"grid text-center space-y-2",children:[e.jsx("div",{className:"bg-slate-200 w-fit m-auto p-2 rounded-full overflow-hidden",children:e.jsx("img",{className:"w-12 translate-y-3",src:Be,alt:""})}),e.jsx("p",{className:"text-lg",children:"This band is not showing any same products."}),e.jsx("p",{className:"font-semibold",children:"Please select another brand for the same product"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:D.map(t=>{const s=((t.price-t.discountPrice)/t.price*100).toFixed(0);return e.jsx("div",{className:"w-full h-full p-0.5 md:p-2 group",children:e.jsxs("div",{className:"w-full h-full flex-1 rounded hover:rounded-none shadow-sm border hover:border-[1.6px] hover:border-[#ff5a00] hover:text-[#ff5a00] p-2.5 transition-all group relative",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"absolute z-10 w-full flex justify-between items-start gap-1",children:[e.jsx("div",{className:"space-y-2 opacity-0 group-hover:opacity-100 transition-opacity",children:t.status!=="Out of Stock"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:!A[t._id]&&e.jsx("div",{onClick:()=>K(t),children:e.jsx(ee,{className:"cursor-pointer w-8 h-8 shadow-xl text-xl bg-white hover:bg-[#ff5a00] hover:text-white rounded-full p-2 transition-all"})})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(te,{className:"cursor-pointer w-8 h-8 shadow-xl text-xl bg-white hover:bg-[#ff5a00] hover:text-white rounded-full p-2 transition-all",onClick:()=>O(t)})})]})}),e.jsxs("div",{className:"md:flex items-center gap-1 right-0",children:[t.status!=="Out of Stock"&&t.discountPrice>0&&s>=25&&e.jsxs("p",{className:"flex items-center text-xs md:text-md gap-1 bg-[#ff5a00] text-white rounded-full px-2.5 p-0.5",children:["Deal",e.jsx("span",{children:"Limit"})]}),t.status==="Out of Stock"?e.jsx("p",{className:"bg-[#ff5a00] text-white text-xs md:text-md rounded-full px-2.5 p-0.5",children:"Stock Out"}):t.discountPrice>0?e.jsxs("p",{className:"w-fit ml-auto bg-[#ff5a00] text-center right-0 text-white text-xs md:text-md rounded-full px-2.5 p-0.5 mt-0.5",children:["-",s,"%"]}):null]})]}),e.jsx("div",{className:"flex justify-center items-center overflow-hidden",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-[300px] h-[135px] md:h-[250px] object-cover transition-transform duration-300 ease-in-out transform hover:scale-150 hover:cursor-zoom-in",style:{transformOrigin:"center"},onMouseMove:l=>{const{left:i,top:m,width:n,height:c}=l.target.getBoundingClientRect(),be=(l.clientX-i)/n*100,ye=(l.clientY-m)/c*100;l.target.style.transformOrigin=`${be}% ${ye}%`}})})]}),e.jsxs("div",{className:"w-full text-center my-3",children:[e.jsx("p",{className:"uppercase text-xs text-slate-500 hover:text-[#ff5a00]",children:t.category}),e.jsx("p",{className:"font-semibold text-[12px] md:text-[14px] uppercase text-gray-700 hover:text-[#ff5a00]",children:t.name}),e.jsx("div",{className:"flex justify-center items-center gap-2",children:t.discountPrice>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl font-semibold font-serif text-[#ff5a00]",children:["৳",t.discountPrice]}),e.jsx("p",{className:"font-serif text-slate-500",children:e.jsxs("s",{children:["৳",t.price]})})]}):e.jsxs("p",{className:"text-xl font-semibold font-serif text-[#ff5a00]",children:["৳",t.price]})}),e.jsxs("div",{className:"relative group",children:[e.jsx("hr",{className:`mt-4 ${t.status==="Available"?"group-hover:opacity-0":"opacity-100"}`}),t.rating>0&&e.jsx("div",{className:`absolute w-full flex justify-center items-center transform -translate-y-1/2 transition-opacity duration-300 ${t.status==="Available"?"group-hover:opacity-0":"opacity-100"}`,children:e.jsx("div",{className:"flex space-x-0",children:Array.from({length:5},(l,i)=>{const m=t.rating,n=i+1<=Math.floor(m),c=i+1>Math.floor(m)&&i<m;return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-[1.2rem] w-[1.2rem]",viewBox:"0 0 24 24",fill:"none",children:n?e.jsx("path",{fill:"#ff5a00",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}):c?e.jsxs("g",{children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`halfStar-${i}`,children:[e.jsx("stop",{offset:"50%",stopColor:"#ff5a00"}),e.jsx("stop",{offset:"50%",stopColor:"#D1D5DB"})]})}),e.jsx("path",{fill:`url(#halfStar-${i})`,d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})]}):e.jsx("path",{fill:"#D1D5DB",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})},i)})})})]})]}),e.jsxs("div",{className:"relative py-2.5",children:[e.jsxs("div",{className:`flex justify-center items-center gap-4 transition-all ${t.status==="Available"?"group-hover:opacity-0":""}`,children:[e.jsx("div",{className:"w-fit flex items-center hover:p-1 justify-center rounded-full hover:bg-[#ff5a00] hover:text-white transition-all",children:!A[t._id]&&e.jsx("div",{onClick:()=>K(t),children:e.jsx(ee,{className:"cursor-pointer hover:p-1 text-xl transition-all"})})}),e.jsx(Fe,{}),e.jsx("div",{className:"w-fit flex items-center justify-center hover:p-1 rounded-full hover:bg-[#ff5a00] hover:text-white transition-all",children:e.jsx(te,{className:"cursor-pointer hover:p-1 text-xl transition-all",onClick:()=>O(t)})})]}),e.jsx("div",{className:"absolute w-full flex flex-col items-end opacity-0 group-hover:opacity-100 transition-opacity text-sm transform -translate-y-20 mt-4 md:mt-3",children:je(t._id)?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-center w-full h-8 md:h-9 rounded-full bg-orange-600 text-white font-semibold mt-2",onClick:()=>ge(t._id),children:"Remove Item"}),e.jsx(se,{to:"/checkout",className:"w-full mt-1",children:e.jsx("button",{className:"w-full text-center bg-[#1e1f29] text-white font-semibold rounded-full h-8 md:h-9",onClick:()=>Q(t),children:"Buy Now"})})]}):t.status!=="Out of Stock"&&t.slots>0?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-center w-full h-8 md:h-9 rounded-full bg-[#ff5a00] text-white font-semibold mt-2",onClick:()=>ue(t),children:"Add To Cart"}),e.jsx(se,{to:"/checkout",className:"w-full mt-1",children:e.jsx("button",{className:"w-full text-center bg-[#1e1f29] text-white font-semibold rounded-full h-8 md:h-9",onClick:()=>Q(t),children:"Buy Now"})})]}):null})]})]})},t._id)})}),e.jsxs("div",{className:"flex justify-center items-center text-sm my-10",children:[e.jsx("button",{className:"bg-[#ff5a00] text-white p-2 sm:px-4 sm:py-2 rounded-l-full hover:bg-orange-600",onClick:pe,children:"◂ Prev"}),e.jsx("ul",{className:"flex",children:Array.from({length:_-u+1},(t,s)=>u+s).map(t=>e.jsx("li",{className:`mx-1 ${d===t?"bg-[#ff5a00] text-white hover:text-white":"bg-[#fc9258] text-white"}`,children:e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-none",onClick:()=>ve(t),children:t})},t))}),e.jsx("button",{className:"bg-[#ff5a00] text-white p-2 sm:px-4 sm:py-2 rounded-r-full hover:bg-orange-600",onClick:we,children:"Next ▸"})]})]})]})]}),U&&e.jsx(Oe,{product:U,onClose:()=>O(null)})]})})};export{_e as default};
