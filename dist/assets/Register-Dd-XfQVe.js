import{R as H,r as gr,A as mr,u as xr,j as y,H as vr,d as br,B as Ne,e as pr,f as wr,s as _r,h as Ar,i as Fr}from"./index-B5pvZNP2.js";var ye=e=>e.type==="checkbox",ne=e=>e instanceof Date,C=e=>e==null;const er=e=>typeof e=="object";var k=e=>!C(e)&&!Array.isArray(e)&&er(e)&&!ne(e),Vr=e=>k(e)&&e.target?ye(e.target)?e.target.checked:e.target.value:e,Nr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Dr=(e,t)=>e.has(Nr(t)),jr=e=>{const t=e.constructor&&e.constructor.prototype;return k(t)&&t.hasOwnProperty("isPrototypeOf")},Se=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let t;const s=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Se&&(e instanceof Blob||e instanceof FileList))&&(s||k(e)))if(t=s?[]:{},!s&&!jr(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=B(e[n]));else return e;return t}var he=e=>Array.isArray(e)?e.filter(Boolean):[],V=e=>e===void 0,f=(e,t,s)=>{if(!t||!k(e))return s;const n=he(t.split(/[,[\].]+?/)).reduce((o,l)=>C(o)?o:o[l],e);return V(n)||n===e?V(e[t])?s:e[t]:n},X=e=>typeof e=="boolean",Le=e=>/^\w*$/.test(e),rr=e=>he(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_=(e,t,s)=>{let n=-1;const o=Le(t)?[t]:rr(t),l=o.length,g=l-1;for(;++n<l;){const h=o[n];let P=s;if(n!==g){const O=e[h];P=k(O)||Array.isArray(O)?O:isNaN(+o[n+1])?{}:[]}if(h==="__proto__")return;e[h]=P,e=e[h]}return e};const Ye={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},z={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};H.createContext(null);var kr=(e,t,s,n=!0)=>{const o={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const g=l;return t._proxyFormState[g]!==z.all&&(t._proxyFormState[g]=!n||z.all),e[g]}});return o},U=e=>k(e)&&!Object.keys(e).length,Er=(e,t,s,n)=>{s(e);const{name:o,...l}=e;return U(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(g=>t[g]===z.all)},De=e=>Array.isArray(e)?e:[e];function Sr(e){const t=H.useRef(e);t.current=e,H.useEffect(()=>{const s=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var J=e=>typeof e=="string",Lr=(e,t,s,n,o)=>J(e)?(n&&t.watch.add(e),f(s,e,o)):Array.isArray(e)?e.map(l=>(n&&t.watch.add(l),f(s,l))):(n&&(t.watchAll=!0),s),Rr=(e,t,s,n,o)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[n]:o||!0}}:{},$e=e=>({isOnSubmit:!e||e===z.onSubmit,isOnBlur:e===z.onBlur,isOnChange:e===z.onChange,isOnAll:e===z.all,isOnTouch:e===z.onTouched}),Ke=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const fe=(e,t,s,n)=>{for(const o of s||Object.keys(e)){const l=f(e,o);if(l){const{_f:g,...h}=l;if(g){if(g.refs&&g.refs[0]&&t(g.refs[0],o)&&!n)break;if(g.ref&&t(g.ref,g.name)&&!n)break;fe(h,t)}else k(h)&&fe(h,t)}}};var Cr=(e,t,s)=>{const n=he(f(e,s));return _(n,"root",t[s]),_(e,s,n),e},Re=e=>e.type==="file",ee=e=>typeof e=="function",ve=e=>{if(!Se)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},xe=e=>J(e),Ce=e=>e.type==="radio",be=e=>e instanceof RegExp;const ze={value:!1,isValid:!1},Ze={value:!0,isValid:!0};var sr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!V(e[0].attributes.value)?V(e[0].value)||e[0].value===""?Ze:{value:e[0].value,isValid:!0}:Ze:ze}return ze};const Ge={isValid:!1,value:null};var tr=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,Ge):Ge;function Je(e,t,s="validate"){if(xe(e)||Array.isArray(e)&&e.every(xe)||X(e)&&!e)return{type:s,message:xe(e)?e:"",ref:t}}var le=e=>k(e)&&!be(e)?e:{value:e,message:""},Qe=async(e,t,s,n,o)=>{const{ref:l,refs:g,required:h,maxLength:P,minLength:O,min:F,max:v,pattern:te,validate:Z,name:E,valueAsNumber:ie,mount:W,disabled:Y}=e._f,x=f(t,E);if(!W||Y)return{};const R=g?g[0]:l,q=b=>{n&&R.reportValidity&&(R.setCustomValidity(X(b)?"":b||""),R.reportValidity())},A={},S=Ce(l),$=ye(l),G=S||$,re=(ie||Re(l))&&V(l.value)&&V(x)||ve(l)&&l.value===""||x===""||Array.isArray(x)&&!x.length,M=Rr.bind(null,E,s,A),ge=(b,p,D,L=Q.maxLength,K=Q.minLength)=>{const I=b?p:D;A[E]={type:b?L:K,message:I,ref:l,...M(b?L:K,I)}};if(o?!Array.isArray(x)||!x.length:h&&(!G&&(re||C(x))||X(x)&&!x||$&&!sr(g).isValid||S&&!tr(g).isValid)){const{value:b,message:p}=xe(h)?{value:!!h,message:h}:le(h);if(b&&(A[E]={type:Q.required,message:p,ref:R,...M(Q.required,p)},!s))return q(p),A}if(!re&&(!C(F)||!C(v))){let b,p;const D=le(v),L=le(F);if(!C(x)&&!isNaN(x)){const K=l.valueAsNumber||x&&+x;C(D.value)||(b=K>D.value),C(L.value)||(p=K<L.value)}else{const K=l.valueAsDate||new Date(x),I=ce=>new Date(new Date().toDateString()+" "+ce),oe=l.type=="time",ue=l.type=="week";J(D.value)&&x&&(b=oe?I(x)>I(D.value):ue?x>D.value:K>new Date(D.value)),J(L.value)&&x&&(p=oe?I(x)<I(L.value):ue?x<L.value:K<new Date(L.value))}if((b||p)&&(ge(!!b,D.message,L.message,Q.max,Q.min),!s))return q(A[E].message),A}if((P||O)&&!re&&(J(x)||o&&Array.isArray(x))){const b=le(P),p=le(O),D=!C(b.value)&&x.length>+b.value,L=!C(p.value)&&x.length<+p.value;if((D||L)&&(ge(D,b.message,p.message),!s))return q(A[E].message),A}if(te&&!re&&J(x)){const{value:b,message:p}=le(te);if(be(b)&&!x.match(b)&&(A[E]={type:Q.pattern,message:p,ref:l,...M(Q.pattern,p)},!s))return q(p),A}if(Z){if(ee(Z)){const b=await Z(x,t),p=Je(b,R);if(p&&(A[E]={...p,...M(Q.validate,p.message)},!s))return q(p.message),A}else if(k(Z)){let b={};for(const p in Z){if(!U(b)&&!s)break;const D=Je(await Z[p](x,t),R,p);D&&(b={...D,...M(p,D.message)},q(D.message),s&&(A[E]=b))}if(!U(b)&&(A[E]={ref:R,...b},!s))return A}}return q(!0),A};function Pr(e,t){const s=t.slice(0,-1).length;let n=0;for(;n<s;)e=V(e)?n++:e[t[n++]];return e}function Tr(e){for(const t in e)if(e.hasOwnProperty(t)&&!V(e[t]))return!1;return!0}function j(e,t){const s=Array.isArray(t)?t:Le(t)?[t]:rr(t),n=s.length===1?e:Pr(e,s),o=s.length-1,l=s[o];return n&&delete n[l],o!==0&&(k(n)&&U(n)||Array.isArray(n)&&Tr(n))&&j(e,s.slice(0,-1)),e}var je=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}},pe=e=>C(e)||!er(e);function se(e,t){if(pe(e)||pe(t))return e===t;if(ne(e)&&ne(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const o of s){const l=e[o];if(!n.includes(o))return!1;if(o!=="ref"){const g=t[o];if(ne(l)&&ne(g)||k(l)&&k(g)||Array.isArray(l)&&Array.isArray(g)?!se(l,g):l!==g)return!1}}return!0}var ir=e=>e.type==="select-multiple",Ur=e=>Ce(e)||ye(e),ke=e=>ve(e)&&e.isConnected,ar=e=>{for(const t in e)if(ee(e[t]))return!0;return!1};function we(e,t={}){const s=Array.isArray(e);if(k(e)||s)for(const n in e)Array.isArray(e[n])||k(e[n])&&!ar(e[n])?(t[n]=Array.isArray(e[n])?[]:{},we(e[n],t[n])):C(e[n])||(t[n]=!0);return t}function lr(e,t,s){const n=Array.isArray(e);if(k(e)||n)for(const o in e)Array.isArray(e[o])||k(e[o])&&!ar(e[o])?V(t)||pe(s[o])?s[o]=Array.isArray(e[o])?we(e[o],[]):{...we(e[o])}:lr(e[o],C(t)?{}:t[o],s[o]):s[o]=!se(e[o],t[o]);return s}var me=(e,t)=>lr(e,t,we(t)),nr=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:n})=>V(e)?e:t?e===""?NaN:e&&+e:s&&J(e)?new Date(e):n?n(e):e;function Ee(e){const t=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):t.disabled))return Re(t)?t.files:Ce(t)?tr(e.refs).value:ir(t)?[...t.selectedOptions].map(({value:s})=>s):ye(t)?sr(e.refs).value:nr(V(t.value)?e.ref.value:t.value,e)}var Or=(e,t,s,n)=>{const o={};for(const l of e){const g=f(t,l);g&&_(o,l,g._f)}return{criteriaMode:s,names:[...e],fields:o,shouldUseNativeValidation:n}},de=e=>V(e)?e:be(e)?e.source:k(e)?be(e.value)?e.value.source:e.value:e,qr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Xe(e,t,s){const n=f(e,s);if(n||Le(s))return{error:n,name:s};const o=s.split(".");for(;o.length;){const l=o.join("."),g=f(t,l),h=f(e,l);if(g&&!Array.isArray(g)&&s!==l)return{name:s};if(h&&h.type)return{name:l,error:h};o.pop()}return{name:s}}var Mr=(e,t,s,n,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(t||e):(s?n.isOnBlur:o.isOnBlur)?!e:(s?n.isOnChange:o.isOnChange)?e:!0,Ir=(e,t)=>!he(f(e,t)).length&&j(e,t);const Br={mode:z.onSubmit,reValidateMode:z.onChange,shouldFocusError:!0};function Hr(e={}){let t={...Br,...e},s={submitCount:0,isDirty:!1,isLoading:ee(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=k(t.defaultValues)||k(t.values)?B(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:B(o),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},P,O=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:je(),array:je(),state:je()},te=$e(t.mode),Z=$e(t.reValidateMode),E=t.criteriaMode===z.all,ie=r=>i=>{clearTimeout(O),O=setTimeout(r,i)},W=async r=>{if(F.isValid||r){const i=t.resolver?U((await G()).errors):await M(n,!0);i!==s.isValid&&v.state.next({isValid:i})}},Y=(r,i)=>{(F.isValidating||F.validatingFields)&&((r||Array.from(h.mount)).forEach(a=>{a&&(i?_(s.validatingFields,a,i):j(s.validatingFields,a))}),v.state.next({validatingFields:s.validatingFields,isValidating:!U(s.validatingFields)}))},x=(r,i=[],a,d,c=!0,u=!0)=>{if(d&&a){if(g.action=!0,u&&Array.isArray(f(n,r))){const m=a(f(n,r),d.argA,d.argB);c&&_(n,r,m)}if(u&&Array.isArray(f(s.errors,r))){const m=a(f(s.errors,r),d.argA,d.argB);c&&_(s.errors,r,m),Ir(s.errors,r)}if(F.touchedFields&&u&&Array.isArray(f(s.touchedFields,r))){const m=a(f(s.touchedFields,r),d.argA,d.argB);c&&_(s.touchedFields,r,m)}F.dirtyFields&&(s.dirtyFields=me(o,l)),v.state.next({name:r,isDirty:b(r,i),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else _(l,r,i)},R=(r,i)=>{_(s.errors,r,i),v.state.next({errors:s.errors})},q=r=>{s.errors=r,v.state.next({errors:s.errors,isValid:!1})},A=(r,i,a,d)=>{const c=f(n,r);if(c){const u=f(l,r,V(a)?f(o,r):a);V(u)||d&&d.defaultChecked||i?_(l,r,i?u:Ee(c._f)):L(r,u),g.mount&&W()}},S=(r,i,a,d,c)=>{let u=!1,m=!1;const w={name:r},N=!!(f(n,r)&&f(n,r)._f&&f(n,r)._f.disabled);if(!a||d){F.isDirty&&(m=s.isDirty,s.isDirty=w.isDirty=b(),u=m!==w.isDirty);const T=N||se(f(o,r),i);m=!!(!N&&f(s.dirtyFields,r)),T||N?j(s.dirtyFields,r):_(s.dirtyFields,r,!0),w.dirtyFields=s.dirtyFields,u=u||F.dirtyFields&&m!==!T}if(a){const T=f(s.touchedFields,r);T||(_(s.touchedFields,r,a),w.touchedFields=s.touchedFields,u=u||F.touchedFields&&T!==a)}return u&&c&&v.state.next(w),u?w:{}},$=(r,i,a,d)=>{const c=f(s.errors,r),u=F.isValid&&X(i)&&s.isValid!==i;if(e.delayError&&a?(P=ie(()=>R(r,a)),P(e.delayError)):(clearTimeout(O),P=null,a?_(s.errors,r,a):j(s.errors,r)),(a?!se(c,a):c)||!U(d)||u){const m={...d,...u&&X(i)?{isValid:i}:{},errors:s.errors,name:r};s={...s,...m},v.state.next(m)}},G=async r=>{Y(r,!0);const i=await t.resolver(l,t.context,Or(r||h.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return Y(r),i},re=async r=>{const{errors:i}=await G(r);if(r)for(const a of r){const d=f(i,a);d?_(s.errors,a,d):j(s.errors,a)}else s.errors=i;return i},M=async(r,i,a={valid:!0})=>{for(const d in r){const c=r[d];if(c){const{_f:u,...m}=c;if(u){const w=h.array.has(u.name);Y([d],!0);const N=await Qe(c,l,E,t.shouldUseNativeValidation&&!i,w);if(Y([d]),N[u.name]&&(a.valid=!1,i))break;!i&&(f(N,u.name)?w?Cr(s.errors,N,u.name):_(s.errors,u.name,N[u.name]):j(s.errors,u.name))}m&&await M(m,i,a)}}return a.valid},ge=()=>{for(const r of h.unMount){const i=f(n,r);i&&(i._f.refs?i._f.refs.every(a=>!ke(a)):!ke(i._f.ref))&&_e(r)}h.unMount=new Set},b=(r,i)=>(r&&i&&_(l,r,i),!se(Pe(),o)),p=(r,i,a)=>Lr(r,h,{...g.mount?l:V(i)?o:J(r)?{[r]:i}:i},a,i),D=r=>he(f(g.mount?l:o,r,e.shouldUnregister?f(o,r,[]):[])),L=(r,i,a={})=>{const d=f(n,r);let c=i;if(d){const u=d._f;u&&(!u.disabled&&_(l,r,nr(i,u)),c=ve(u.ref)&&C(i)?"":i,ir(u.ref)?[...u.ref.options].forEach(m=>m.selected=c.includes(m.value)):u.refs?ye(u.ref)?u.refs.length>1?u.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(c)?!!c.find(w=>w===m.value):c===m.value)):u.refs[0]&&(u.refs[0].checked=!!c):u.refs.forEach(m=>m.checked=m.value===c):Re(u.ref)?u.ref.value="":(u.ref.value=c,u.ref.type||v.values.next({name:r,values:{...l}})))}(a.shouldDirty||a.shouldTouch)&&S(r,c,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ce(r)},K=(r,i,a)=>{for(const d in i){const c=i[d],u=`${r}.${d}`,m=f(n,u);(h.array.has(r)||!pe(c)||m&&!m._f)&&!ne(c)?K(u,c,a):L(u,c,a)}},I=(r,i,a={})=>{const d=f(n,r),c=h.array.has(r),u=B(i);_(l,r,u),c?(v.array.next({name:r,values:{...l}}),(F.isDirty||F.dirtyFields)&&a.shouldDirty&&v.state.next({name:r,dirtyFields:me(o,l),isDirty:b(r,u)})):d&&!d._f&&!C(u)?K(r,u,a):L(r,u,a),Ke(r,h)&&v.state.next({...s}),v.values.next({name:g.mount?r:void 0,values:{...l}})},oe=async r=>{g.mount=!0;const i=r.target;let a=i.name,d=!0;const c=f(n,a),u=()=>i.type?Ee(c._f):Vr(r),m=w=>{d=Number.isNaN(w)||w===f(l,a,w)};if(c){let w,N;const T=u(),ae=r.type===Ye.BLUR||r.type===Ye.FOCUS_OUT,fr=!qr(c._f)&&!t.resolver&&!f(s.errors,a)&&!c._f.deps||Mr(ae,f(s.touchedFields,a),s.isSubmitted,Z,te),Fe=Ke(a,h,ae);_(l,a,T),ae?(c._f.onBlur&&c._f.onBlur(r),P&&P(0)):c._f.onChange&&c._f.onChange(r);const Ve=S(a,T,ae,!1),yr=!U(Ve)||Fe;if(!ae&&v.values.next({name:a,type:r.type,values:{...l}}),fr)return F.isValid&&W(),yr&&v.state.next({name:a,...Fe?{}:Ve});if(!ae&&Fe&&v.state.next({...s}),t.resolver){const{errors:He}=await G([a]);if(m(T),d){const hr=Xe(s.errors,n,a),We=Xe(He,n,hr.name||a);w=We.error,a=We.name,N=U(He)}}else Y([a],!0),w=(await Qe(c,l,E,t.shouldUseNativeValidation))[a],Y([a]),m(T),d&&(w?N=!1:F.isValid&&(N=await M(n,!0)));d&&(c._f.deps&&ce(c._f.deps),$(a,N,w,Ve))}},ue=(r,i)=>{if(f(s.errors,i)&&r.focus)return r.focus(),1},ce=async(r,i={})=>{let a,d;const c=De(r);if(t.resolver){const u=await re(V(r)?r:c);a=U(u),d=r?!c.some(m=>f(u,m)):a}else r?(d=(await Promise.all(c.map(async u=>{const m=f(n,u);return await M(m&&m._f?{[u]:m}:m)}))).every(Boolean),!(!d&&!s.isValid)&&W()):d=a=await M(n);return v.state.next({...!J(r)||F.isValid&&a!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:a}:{},errors:s.errors}),i.shouldFocus&&!d&&fe(n,ue,r?c:h.mount),d},Pe=r=>{const i={...g.mount?l:o};return V(r)?i:J(r)?f(i,r):r.map(a=>f(i,a))},Te=(r,i)=>({invalid:!!f((i||s).errors,r),isDirty:!!f((i||s).dirtyFields,r),error:f((i||s).errors,r),isValidating:!!f(s.validatingFields,r),isTouched:!!f((i||s).touchedFields,r)}),or=r=>{r&&De(r).forEach(i=>j(s.errors,i)),v.state.next({errors:r?s.errors:{}})},Ue=(r,i,a)=>{const d=(f(n,r,{_f:{}})._f||{}).ref,c=f(s.errors,r)||{},{ref:u,message:m,type:w,...N}=c;_(s.errors,r,{...N,...i,ref:d}),v.state.next({name:r,errors:s.errors,isValid:!1}),a&&a.shouldFocus&&d&&d.focus&&d.focus()},ur=(r,i)=>ee(r)?v.values.subscribe({next:a=>r(p(void 0,i),a)}):p(r,i,!0),_e=(r,i={})=>{for(const a of r?De(r):h.mount)h.mount.delete(a),h.array.delete(a),i.keepValue||(j(n,a),j(l,a)),!i.keepError&&j(s.errors,a),!i.keepDirty&&j(s.dirtyFields,a),!i.keepTouched&&j(s.touchedFields,a),!i.keepIsValidating&&j(s.validatingFields,a),!t.shouldUnregister&&!i.keepDefaultValue&&j(o,a);v.values.next({values:{...l}}),v.state.next({...s,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&W()},Oe=({disabled:r,name:i,field:a,fields:d,value:c})=>{if(X(r)&&g.mount||r){const u=r?void 0:V(c)?Ee(a?a._f:f(d,i)._f):c;_(l,i,u),S(i,u,!1,!1,!0)}},Ae=(r,i={})=>{let a=f(n,r);const d=X(i.disabled);return _(n,r,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:r}},name:r,mount:!0,...i}}),h.mount.add(r),a?Oe({field:a,disabled:i.disabled,name:r,value:i.value}):A(r,!0,i.value),{...d?{disabled:i.disabled}:{},...t.progressive?{required:!!i.required,min:de(i.min),max:de(i.max),minLength:de(i.minLength),maxLength:de(i.maxLength),pattern:de(i.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:c=>{if(c){Ae(r,i),a=f(n,r);const u=V(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,m=Ur(u),w=a._f.refs||[];if(m?w.find(N=>N===u):u===a._f.ref)return;_(n,r,{_f:{...a._f,...m?{refs:[...w.filter(ke),u,...Array.isArray(f(o,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),A(r,!1,void 0,u)}else a=f(n,r,{}),a._f&&(a._f.mount=!1),(t.shouldUnregister||i.shouldUnregister)&&!(Dr(h.array,r)&&g.action)&&h.unMount.add(r)}}},qe=()=>t.shouldFocusError&&fe(n,ue,h.mount),cr=r=>{X(r)&&(v.state.next({disabled:r}),fe(n,(i,a)=>{const d=f(n,a);d&&(i.disabled=d._f.disabled||r,Array.isArray(d._f.refs)&&d._f.refs.forEach(c=>{c.disabled=d._f.disabled||r}))},0,!1))},Me=(r,i)=>async a=>{let d;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=B(l);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:u,values:m}=await G();s.errors=u,c=m}else await M(n);if(j(s.errors,"root"),U(s.errors)){v.state.next({errors:{}});try{await r(c,a)}catch(u){d=u}}else i&&await i({...s.errors},a),qe(),setTimeout(qe);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(s.errors)&&!d,submitCount:s.submitCount+1,errors:s.errors}),d)throw d},dr=(r,i={})=>{f(n,r)&&(V(i.defaultValue)?I(r,B(f(o,r))):(I(r,i.defaultValue),_(o,r,B(i.defaultValue))),i.keepTouched||j(s.touchedFields,r),i.keepDirty||(j(s.dirtyFields,r),s.isDirty=i.defaultValue?b(r,B(f(o,r))):b()),i.keepError||(j(s.errors,r),F.isValid&&W()),v.state.next({...s}))},Ie=(r,i={})=>{const a=r?B(r):o,d=B(a),c=U(r),u=c?o:d;if(i.keepDefaultValues||(o=a),!i.keepValues){if(i.keepDirtyValues)for(const m of h.mount)f(s.dirtyFields,m)?_(u,m,f(l,m)):I(m,f(u,m));else{if(Se&&V(r))for(const m of h.mount){const w=f(n,m);if(w&&w._f){const N=Array.isArray(w._f.refs)?w._f.refs[0]:w._f.ref;if(ve(N)){const T=N.closest("form");if(T){T.reset();break}}}}n={}}l=e.shouldUnregister?i.keepDefaultValues?B(o):{}:B(u),v.array.next({values:{...u}}),v.values.next({values:{...u}})}h={mount:i.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!F.isValid||!!i.keepIsValid||!!i.keepDirtyValues,g.watch=!!e.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?s.submitCount:0,isDirty:c?!1:i.keepDirty?s.isDirty:!!(i.keepDefaultValues&&!se(r,o)),isSubmitted:i.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:c?[]:i.keepDirtyValues?i.keepDefaultValues&&l?me(o,l):s.dirtyFields:i.keepDefaultValues&&r?me(o,r):i.keepDirty?s.dirtyFields:{},touchedFields:i.keepTouched?s.touchedFields:{},errors:i.keepErrors?s.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Be=(r,i)=>Ie(ee(r)?r(l):r,i);return{control:{register:Ae,unregister:_e,getFieldState:Te,handleSubmit:Me,setError:Ue,_executeSchema:G,_getWatch:p,_getDirty:b,_updateValid:W,_removeUnmounted:ge,_updateFieldArray:x,_updateDisabledField:Oe,_getFieldArray:D,_reset:Ie,_resetDefaultValues:()=>ee(t.defaultValues)&&t.defaultValues().then(r=>{Be(r,t.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_disableForm:cr,_subjects:v,_proxyFormState:F,_setErrors:q,get _fields(){return n},get _formValues(){return l},get _state(){return g},set _state(r){g=r},get _defaultValues(){return o},get _names(){return h},set _names(r){h=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ce,register:Ae,handleSubmit:Me,watch:ur,setValue:I,getValues:Pe,reset:Be,resetField:dr,clearErrors:or,unregister:_e,setError:Ue,setFocus:(r,i={})=>{const a=f(n,r),d=a&&a._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),i.shouldSelect&&c.select())}},getFieldState:Te}}function Wr(e={}){const t=H.useRef(),s=H.useRef(),[n,o]=H.useState({isDirty:!1,isValidating:!1,isLoading:ee(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Hr(e),formState:n});const l=t.current.control;return l._options=e,Sr({subject:l._subjects.state,next:g=>{Er(g,l._proxyFormState,l._updateFormState)&&o({...l._formState})}}),H.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),H.useEffect(()=>{if(l._proxyFormState.isDirty){const g=l._getDirty();g!==n.isDirty&&l._subjects.state.next({isDirty:g})}},[l,n.isDirty]),H.useEffect(()=>{e.values&&!se(e.values,s.current)?(l._reset(e.values,l._options.resetOptions),s.current=e.values,o(g=>({...g}))):l._resetDefaultValues()},[e.values,l]),H.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),H.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),H.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),t.current.formState=kr(n,l),t.current}const Zr=()=>{var E,ie,W,Y;const e=pr(),{createUser:t,updateUserProfile:s}=gr.useContext(mr),n=xr(),{register:o,handleSubmit:l,reset:g,formState:{errors:h},watch:P}=Wr(),O=P("password"),F=()=>Math.floor(1e7+Math.random()*9e7),v=x=>new Promise((R,q)=>{const A=wr(_r,`users/${x.name}`),S=Ar(A,x);S.on("state_changed",$=>{},$=>{q($)},()=>{Fr(S.snapshot.ref).then($=>{R($)})})}),te=x=>{const R={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return x.toLocaleString("en-US",R).replace(",","")},Z=async x=>{console.log("Form Data:",x);const R=F(),A=te(new Date);try{const S=await v(x.photo[0]);console.log("Photo URL:",S);const $=await t(x.email,x.password);console.log("Firebase User:",$.user),await s(x.name,S);const G={userId:R,name:x.name,email:x.email,photo:S,phone:x.phone,city:x.city,country:x.country,joined:A};console.log("User Info:",G),(await e.post("/user",G)).data.insertedId&&(g(),Ne.success("User created successfully."),n("/dashboard"))}catch(S){console.error("Error during registration:",S),S.code==="auth/email-already-in-use"?Ne.error("This email is already in use. Please try another one."):Ne.error("Registration failed. Please try again.")}};return y.jsxs("section",{children:[y.jsx(vr,{children:y.jsx("title",{children:"Bondon BD | Register"})}),y.jsx("div",{className:"flex justify-center items-center bg-gray-100",children:y.jsxs("div",{className:"w-full m-5 max-w-xl p-8 space-y-8 bg-white shadow-lg rounded-md",children:[y.jsx("h1",{className:"text-2xl font-bold text-center",children:"Create an Account"}),y.jsxs("form",{onSubmit:l(Z),className:"space-y-3",children:[y.jsxs("div",{className:"sm:flex gap-4",children:[y.jsxs("div",{className:"form-control w-full space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Name ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"text",name:"name",placeholder:"Your Full Name",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("name",{required:!0})}),h.name&&y.jsx("span",{className:"text-orange-500",children:"Name is required"})]}),y.jsxs("div",{className:"form-control mt-3 sm:mt-0 w-full space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Photo ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"file",name:"photo",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("photo",{required:!0})}),h.photo&&y.jsx("span",{className:"text-orange-500",children:"Photo is required"})]})]}),y.jsxs("div",{className:"sm:flex gap-4",children:[y.jsxs("div",{className:"form-control w-full space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["City / District ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"text",name:"city",placeholder:"Your City",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("city",{required:!0})}),h.city&&y.jsx("span",{className:"text-orange-500",children:"City is required"})]}),y.jsxs("div",{className:"form-control w-full mt-3 sm:mt-0 space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Country ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"text",name:"country",placeholder:"Your Country",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("country",{required:!0})}),h.country&&y.jsx("span",{className:"text-orange-500",children:"Country is required"})]})]}),y.jsxs("div",{className:"sm:flex gap-4",children:[y.jsxs("div",{className:"form-control w-full space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Email ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"email",name:"email",placeholder:"Your Email",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("email",{required:!0})}),h.email&&y.jsx("span",{className:"text-orange-500",children:"Email is required"})]}),y.jsxs("div",{className:"form-control w-full mt-3 sm:mt-0 space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Number ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"text",name:"phone",placeholder:"Your Phone Number",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("phone",{required:!0})}),h.phone&&y.jsx("span",{className:"text-orange-500",children:"Phone Number is required"})]})]}),y.jsxs("div",{className:"sm:flex gap-4",children:[y.jsxs("div",{className:"form-control w-full space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Password ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"password",name:"password",placeholder:"Your Password",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("password",{required:!0,minLength:6,maxLength:20,pattern:/(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9])(?=.*[a-z])/})}),((E=h.password)==null?void 0:E.type)==="required"&&y.jsx("p",{className:"text-orange-500",children:"Password is required"}),((ie=h.password)==null?void 0:ie.type)==="minLength"&&y.jsx("p",{className:"text-orange-500",children:"Password must be at least 6 characters"}),((W=h.password)==null?void 0:W.type)==="maxLength"&&y.jsx("p",{className:"text-orange-500",children:"Password must be less than 20 characters"}),((Y=h.password)==null?void 0:Y.type)==="pattern"&&y.jsx("p",{className:"text-orange-500",children:"Password must have one uppercase, one lowercase, one number, and one special character"})]}),y.jsxs("div",{className:"form-control w-full mt-3 sm:mt-0 space-y-2",children:[y.jsxs("label",{className:"block text-gray-700",children:["Confirm Password ",y.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),y.jsx("input",{type:"password",name:"confirm_password",placeholder:"Confirm Password",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-[#ff5a00]",...o("confirm_password",{required:!0,validate:x=>x===O||"Passwords do not match"})}),h.confirm_password&&y.jsx("p",{className:"text-orange-500",children:h.confirm_password.message})]})]}),y.jsx("div",{className:"form-control",children:y.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-[#ff5a00] rounded-full hover:bg-orange-600",children:"Register"})})]}),y.jsx("div",{className:"text-center",children:y.jsx(br,{to:"/login",className:"text-[#ff5a00] dashboard list-none w-full flex justify-center",children:y.jsx("li",{children:" Already have an account? Login here."})})})]})})]})};export{Zr as default};
