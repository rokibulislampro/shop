import{r as d,j as e,B as g,ag as v,f as S,h as B,i as C,k as D,M as U}from"./index-B5pvZNP2.js";const k=({banner:l,onClose:u,onUpdate:m})=>{const h=(r=>{const s={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return r.toLocaleString("en-US",s).replace(",","")})(new Date),[n,f]=d.useState({name:l.name||"",status:l.status||"",image:l.image||"",updateDate:h}),[o,t]=d.useState(null),a=r=>{const{name:s,value:x}=r.target;f({...n,[s]:x})},c=r=>{t(r.target.files[0])},N=()=>new Promise((r,s)=>{if(!o){r(null);return}const x=v(),w=S(x,`banners/${o.name}`),b=B(w,o);b.on("state_changed",i=>{},i=>{s(i)},()=>{C(b.snapshot.ref).then(i=>{r(i)}).catch(i=>{s(i)})})}),y=async r=>{r.preventDefault();try{const s=await N(),x=s?{...n,image:s}:n;await m(l._id,x),u()}catch(s){g.error("Failed to update banner."),console.error("Error updating banner:",s)}};return e.jsx("section",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-[90%] max-w-2xl",children:[e.jsx("h2",{className:"text-xl mb-4 font-semibold",children:"Update Banner"}),e.jsxs("form",{className:" text-sm",onSubmit:y,children:[" ",e.jsx("div",{className:"flex items-center gap-3 my-3 w-full",children:e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"text",name:"name",value:n.name,onChange:a,placeholder:"Name",className:"w-full p-3 px-5 border rounded-full input-field"})}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{name:"status",value:n.status,onChange:a,className:"w-full p-3 px-5 border rounded-full input-field",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Status"})," ",e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})}),e.jsx("div",{className:"w-full",children:e.jsx("input",{type:"file",name:"image",onChange:c,placeholder:"Upload Image",className:"w-full p-3 px-5 border rounded-full input-field"})})]})}),e.jsxs("div",{className:"w-full flex justify-end items-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-[#1d1e29] hover:bg-black text-white px-7 py-2.5 rounded-full font-semibold transition-all",onClick:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-[#ff5a00] hover:bg-orange-600 text-white px-5 py-2.5 rounded-full font-semibold transition-all",children:"Update Product"})]})]})]})})},A=()=>{const[l,u]=d.useState([]),m=D(),[j,p]=d.useState(!1),[h,n]=d.useState(" ");d.useEffect(()=>{(async()=>{try{const a=await m.get("/banner");u(a.data)}catch(a){console.error("Error fetching Banners:",a),g.error("Failed to load Banners.")}})()},[m]);const f=async(t,a)=>{try{await m.put(`/banner/${t}`,a),u(l.map(c=>c._id===t?{...a,_id:t}:c)),g.success("Banner updated successfully!"),p(!1)}catch(c){g.error("Failed to update Banner."),console.error("Error updating Banner:",c)}};function o(t){switch(t){case"Active":return{color:"blue",backgroundColor:"rgba(0, 0, 255, 0)"};case"Inactive":return{color:"red",backgroundColor:"rgba(255, 0, 0, 0)"};default:return{color:"blue",backgroundColor:"rgba(0, 0, 255, 0)"}}}return e.jsxs("section",{className:"container mx-auto px-[0.5rem] py-6 text-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"font-semibold",children:"All Banner:"}),l.length>0?e.jsx("div",{className:"lg:overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-start",children:"Image"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Last Update"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-start",children:"Edit"})]})}),e.jsx("tbody",{children:l.map((t,a)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2 flex items-center gap-2",children:[a+1,"."," ",e.jsx("img",{src:t.image,alt:"banner",className:"w-16 md:w-32 h-16 rounded object-fill"})]}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.name||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-start",children:t.updateDate||"N/A"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{style:{color:o(t.status).color,backgroundColor:o(t.status).backgroundColor,padding:"8px",borderRadius:"4px"},children:t.status||"N/A"})}),e.jsx("td",{className:"px-4 py-2 text-start",children:e.jsx("button",{className:"bg-slate-100 hover:bg-[#1e1d29] hover:text-white transition-all shadow-md p-3.5 rounded-full flex items-center justify-center",onClick:()=>{n(t),p(!0)},children:e.jsx(U,{})})})]},t._id))})]})}):e.jsx("p",{children:"No banners available"})]}),j&&h&&e.jsx(k,{banner:h,onClose:()=>p(!1),onUpdate:f})]})};export{A as default};
