import{r,C as O,k as T,u as E,j as e,H as B,p as m}from"./index-B5pvZNP2.js";const z=()=>{const[d,p]=r.useState("Cash on Delivery"),{cart:l,cartDispatch:g}=r.useContext(O),[f,N]=r.useState(!1),[y,h]=r.useState(null),[o,u]=r.useState(0),j=T(),[x,b]=r.useState(!1),c=E();r.useEffect(()=>{l.length===0&&c("/Cart")},[l,c]);const v=()=>{b(!x)},C=()=>{const s="0123456789";let t="";for(let i=0;i<6;i++)t+=s[Math.floor(Math.random()*s.length)];return t},D=()=>{const s="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let i=0;i<8;i++)t+=s[Math.floor(Math.random()*s.length)];return t},k=s=>{const t=s.target.value;u(t==="inside-dhaka"?50:t==="outside-dhaka"?100:0)},w=async s=>{s.preventDefault();const t=new Date,i=t.toLocaleDateString(),S=t.toLocaleTimeString(),P=(a=>{const n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return a.toLocaleString("en-US",n).replace(",","")})(t),I={fullName:s.target.fullName.value,phone:s.target.phone.value,email:s.target.email.value,address:s.target.address.value,country:s.target.country.value,district:s.target.district.value,additionalInfo:s.target.additionalInfo.value||""},q={products:l.map(a=>({id:a._id,name:a.name,category:a.category,subcategory:a.subcategory,image:a.image,quantity:a.quantity,purchasePrice:a.purchasePrice,price:a.discountPrice>0?a.discountPrice:a.price,sku:a.sku,status:a.status})),total:m(l),deliveryCharge:o,grandTotal:m(l)+o,date:i,time:S,paymentMethod:d,termsCondition:x,status:"Pending",type:"Undefined"},A={orderId:C(),trackingId:D(),billingDetails:I,orderDetails:q};try{if((await j.post("/order",A)).status===200){for(const n of l){const F=n.slots-n.quantity,M=(n.sold||0)+n.quantity;await j.put(`/product/${n.id}`,{slots:F,sold:M,updateDate:P})}g({type:"CLEAR_CART"}),N(!0)}else h("Failed to place order. Please try again.")}catch(a){a.response&&a.response.status===401?h("Unauthorized. Please log in."):h("Failed to place order. Please try again.")}};return r.useEffect(()=>{f&&c("/Ordered")},[f,c]),e.jsxs("section",{children:[e.jsx(B,{children:e.jsx("title",{children:"Bondon BD | Checkout"})}),e.jsxs("div",{className:"m-[1rem] xl:mx-[10rem] my-10",children:[e.jsxs("form",{className:"md:flex gap-4",onSubmit:w,children:[e.jsxs("div",{className:"w-full md:w-2/3 border p-5 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Billing Details"}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"md:flex gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"fullName",className:"block",children:["Full Name ",e.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",placeholder:"Full Name",required:!0,className:"w-full p-2 md:p-3 border rounded"})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"phone",className:"block",children:["Phone No.",e.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),e.jsx("input",{type:"number",id:"phone",name:"phone",placeholder:"Phone Mandatory for Order Tracking",required:!0,className:"w-full p-2 md:p-3 border rounded"})]})]}),e.jsxs("div",{className:"md:flex gap-4",children:[e.jsxs("div",{className:"w-full mt-2 md:mt-0",children:[e.jsx("label",{htmlFor:"email",className:"block",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Email Mandatory for Order Tracking On Website",className:"w-full p-2 md:p-3 border rounded"})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"address",className:"block",children:["Address ",e.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),e.jsx("input",{type:"text",id:"address",name:"address",placeholder:"Street Address, House Name & No.",required:!0,className:"w-full p-2 md:p-3 border rounded"})]})]}),e.jsxs("div",{className:"md:flex gap-4",children:[e.jsxs("div",{className:"w-full mt-2 md:mt-0",children:[e.jsxs("label",{htmlFor:"district",className:"block",children:["City / District ",e.jsx("span",{className:"text-[#ff5a00]",children:"*"})]}),e.jsx("input",{type:"text",id:"district",name:"district",placeholder:"District",required:!0,className:"w-full p-2 md:p-3 border rounded"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"country",className:"block",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",placeholder:"Country",className:"w-full p-2 md:p-3 border rounded"})]})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"font-semibold",children:["Additional Information",e.jsx("span",{className:"text-[#6a6a6b] text-xs",children:" (optional)"})]}),e.jsx("hr",{className:"my-2"}),e.jsx("textarea",{id:"additionalInfo",name:"additionalInfo",placeholder:"Add some special notes or anything you did not find above fields...",className:"w-full p-2 md:p-3 border rounded"})]})]})]}),e.jsxs("div",{className:"w-full md:w-1/3 h-fit mt-10 md:mt-0 border p-5 rounded-lg border-[#ff5a00]",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Order"}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-[#c9c9c9]",children:[e.jsx("p",{className:"flex font-semibold",children:"Product"}),e.jsx("p",{className:"font-semibold",children:"Subtotal"})]}),e.jsx("hr",{className:"my-3"}),l.map(s=>e.jsxs("div",{className:"flex justify-between my-3",children:[e.jsxs("p",{children:[s.name," ",e.jsxs("span",{className:"font-semibold",children:["×",s.quantity]})]}),e.jsxs("p",{className:"font-semibold",children:["৳"," ",s.discountPrice>0?s.discountPrice*s.quantity:s.price*s.quantity]})]},s.id)),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"font-semibold",children:"Total"}),e.jsxs("p",{className:"font-semibold",children:["৳",m(l)]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("select",{onChange:k,required:!0,className:"mr-4",children:[e.jsx("option",{value:"",children:"Select Area"}),e.jsx("option",{value:"inside-dhaka",children:"Inside Dhaka"}),e.jsx("option",{value:"outside-dhaka",children:"Outside Dhaka"})]}),e.jsxs("p",{className:"font-semibold",children:["৳",o]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"font-semibold",children:"Grand Total"}),e.jsxs("p",{className:"font-semibold",children:["৳",m(l)+o]})," "]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"transition-all",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("input",{type:"radio",id:"Cash on Delivery",name:"payment-option",checked:d==="Cash on Delivery",onChange:()=>p("Cash on Delivery"),className:"mr-2"}),e.jsx("label",{htmlFor:"Cash on Delivery",className:"text-orange-500 font-semibold text-sm",children:"Cash on Delivery"}),d==="Cash on Delivery"&&e.jsx("p",{className:"ml-2 text-gray-500 text-xs",children:"Convenient Cash-on-Delivery Option Available for Hassle-Free Shopping Experience. Delivery Charge Applicable (T&Cs Apply)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"radio",id:"digital-payment",name:"payment-option",checked:d==="Cards, Mobile, Digital Payment",onChange:()=>p("Cards, Mobile, Digital Payment"),className:"mr-2"}),e.jsx("label",{htmlFor:"digital-payment",className:"text-orange-500 font-semibold text-sm",children:"Cards, Mobile, Digital Payment"}),d==="Cards, Mobile, Digital Payment"&&e.jsx("p",{className:"ml-2 text-gray-500 text-xs",children:"Pay Securely by Debit/Credit Cards, Mobile Banking, or Internet Banking through SSLCommerz Secure Servers. Delivery Charge Applicable (T&Cs Apply)"})]})]}),e.jsxs("p",{className:"my-3",children:["Your personal data will be used to process your order, support your experience throughout this website, and for other purposes described in our",e.jsx("a",{className:"text-orange-500 ml-1 underline",children:"privacy policy."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:v,required:!0,className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsxs("label",{className:"text-sm text-gray-700",children:["I have read and agree to the website",e.jsx("a",{className:"text-orange-500 ml-1 underline",children:"terms and conditions."})]})]}),e.jsx("button",{type:"submit",className:"w-full mt-4 h-10 text-sm bg-[#ff5a00] text-white font-semibold rounded-full hover:bg-orange-600 transition",children:"Place Order"})]})]}),y&&e.jsx("p",{className:"text-[#ff5a00] mt-4",children:y})]})]})};export{z as default};
